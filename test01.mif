# MIF 2.1
# a simple system of uncoupled spins to illustrate the effect of temperature
# The initial state is a system of perfect order and magnetization Mx = Ms, My = Mz = 0
# Under the influence of temperature order decreases rapidly
# My and Mz will fluctuate around zero
# Mx decays exponentially with characteristic time thau = 5.835e-11 s
# and <Mx> = Ms*exp(-t/thau)

Destination Archiv mmArchive
Destination mmDataTable mmDataTable
Destination mmGraph mmGraph
Destination mmDisp1 mmDisp
Destination mmDisp2 mmDisp

#Schedule DataTable Archiv Stage 1
Schedule DataTable mmDataTable Step 1
Schedule DataTable mmGraph Step 1
Schedule YY_2LatTimeDriver::Magnetization mmDisp1 Step 1
Schedule YY_2LatEulerEvolve:evolver:Magnetization2 mmDisp2 Step 1
#Schedule Oxs_TimeDriver::Spin mmDisp2 Step 1


Specify Oxs_BoxAtlas:atlas {
  xrange {0 1e-7}
  yrange {0 1e-7}
  zrange {0 5e-9}
}

Specify Oxs_RectangularMesh:mesh {
  cellsize {4e-9 4e-9 5e-9}
  atlas :atlas
}

Specify Oxs_UZeeman {
  multiplier 79.6
  Hrange { { 1.5000 0 0 1.5000 0 0 37 } }
}

Specify Oxs_UniformExchange {
  A 1e-11
}

#Specify Oxs_Demag {}

proc TempScript { stage } {
  set T [expr 0+10*$stage]
  set spec Oxs_UniformScalarField
  lappend spec [subst {
      value $T
   }]
   return $spec
}

proc SlidingField { xcutoff xrel yrel zrel } {
   if {$xrel>$xcutoff} { return 0.0 }
   return 290
}

Specify Oxs_UniformScalarField:Ms {
  value 500e3
}

Specify Oxs_UniformVectorField:m0 {
  norm 1
  vector {1 0 0}
}

Specify Oxs_UniformScalarField:Ms2 {
  value 200e3
}

Specify Oxs_UniformVectorField:m02 {
  norm 1
  vector {0 1 0}
}

#Specify YY_LLBEulerEvolve:evolver {
Specify YY_2LatEulerEvolve:evolver {
  do_precess 1
  gamma_LL 2.21e5
  alpha_t 0.1
  J { Oxs_UniformScalarField  {value 1.47e-20} }
  atom_moment { Oxs_UniformScalarField {value 3e-23} }
	fixed_timestep 5e-14
	tempscript TempScript
  tempscript_args { stage }
	uniform_seed 111
  use_stochastic 1
}

#Specify Oxs_TimeDriver {
Specify YY_2LatTimeDriver {
  basename test01
  evolver :evolver
  mesh :mesh
  stopping_time { 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 2e-11 }
  stage_count 0
  Ms :Ms
  m0 :m0
  Ms2 :Ms2
  m02 :m02
}

